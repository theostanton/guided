fragment GuideInfo on Guide{
    id
    title
    slug
    owner
    startDate
}

subscription OwnersGuideInfos($owner:String!){
    guides(
        filter: {owner: {
            equalTo: $owner
        }}
    ){
        nodes{
            ...GuideInfo
        }
    }
}

subscription NotOwnersGuideInfos($owner:String!){
    guides(
        filter: {owner: {
            notEqualTo: $owner
        }}
    ){
        nodes{
            ...GuideInfo
        }
    }
}

fragment Spot on Spot{
    id
    label
    lat
    name
    long
    locked
    location
    position
    date
    temperature
    country
    nights
}

fragment Ride on Ride{
    id
    position
    status
    toSpot:spotByToSpot{
        ...Spot
    }
    fromSpot:spotByFromSpot{
        ...Spot
    }
    pathUrl
    hasBorder
    name
    date
    distanceMeters
    durationSeconds
}

fragment Stage on Stage {
    id
    position
    status
    name
    toSpot:spotByToSpot{
        ...Spot
    }
    fromSpot:spotByFromSpot{
        ...Spot
    }
    ridesByStage(orderBy: [POSITION_ASC]){
        nodes{
            ...Ride
        }
    }
}

fragment Guide on Guide {
    id
    slug
    owner
    startDate
    title
    maxHoursPerRide
    firstSpot:spotsByGuide(filter: {position: {equalTo: "0.0"}}){
        nodes{
            ...Spot
        }
    }
    stages:stagesByGuide(orderBy: POSITION_ASC){
        nodes{
            ...Stage
        }
    }
}

subscription GuideStages($id: String!){
    guide(
        id: $id
    ){
        ...Guide
    }
}