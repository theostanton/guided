query GetGuideIdForSlug($slug:String!){
    guides(
        condition:{
            slug: $slug
        }
    ){
        nodes{
            id
            ridesByGuide{
                totalCount
            }
            spotsByGuide{
                totalCount
            }
            computationsByGuide{
                totalCount
            }
        }
    }
}

fragment GuideInfo on Guide{
    id
    title
    slug
    startDate
    owner
    created
    durationSeconds
    distanceMeters
    countries
    bounds{
        east
        north
        south
        west
    }
    rides:ridesByGuide{
        totalCount
        nodes{
            id
            pathUrl
            date
        }
    }
    spots:spotsByGuide{
        totalCount
    }
}

query GuideStagesPublic($id: String!){
    guide(
        id: $id
    ){
        ...Guide
    }
}

query GuideInfos($ids:[String!]!){
    guides(filter: {id: {
        in: $ids
    }},orderBy: [CREATED_DESC]){
        nodes{
            ...GuideInfo
        }
    }
}


fragment Profile on User {
    colour
    username
    created
    countries
    distanceMeters
    durationSeconds
    followingStatus
    followers:followsByFollowed{
        totalCount
    }
    following:followsByFollower{
        totalCount
    }
    guides:guidesByOwner{
        totalCount
        nodes{
            distanceMeters
            durationSeconds
        }
    }
    rides:ridesByOwner{
        totalCount
        nodes{
            distanceMeters
            durationSeconds
        }
    }
}

query UserProfile($username:String!){
    profile:user(username: $username){
        ...Profile
    }
}
